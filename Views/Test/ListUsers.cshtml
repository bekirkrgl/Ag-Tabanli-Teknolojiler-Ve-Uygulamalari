@{
    ViewData["Title"] = "KullanÄ±cÄ± Listesi";
}

<div class="container py-5">
    <div class="row">
        <div class="col-12">
            <h2>KullanÄ±cÄ± Listesi</h2>
            
            <h3>Identity KullanÄ±cÄ±larÄ±</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>E-posta</th>
                        <th>E-posta OnaylÄ±</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in ViewBag.Users)
                    {
                        <tr>
                            <td>@user.Id</td>
                            <td>@user.Email</td>
                            <td>@user.EmailConfirmed</td>
                        </tr>
                    }
                </tbody>
            </table>
            
            <h3>Hasta KayÄ±tlarÄ±</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Ad Soyad</th>
                        <th>E-posta</th>
                        <th>Telefon</th>
                        <th>UserId</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var patient in ViewBag.Patients)
                    {
                        <tr>
                            <td>@patient.Id</td>
                            <td>@patient.FullName</td>
                            <td>@patient.Email</td>
                            <td>@patient.PhoneNumber</td>
                            <td>@patient.UserId</td>
                        </tr>
                    }
                </tbody>
            </table>
            
            <h3>Doktor KayÄ±tlarÄ±</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Ad Soyad</th>
                        <th>E-posta</th>
                        <th>Telefon</th>
                        <th>UserId</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var doctor in ViewBag.Doctors)
                    {
                        <tr>
                            <td>@doctor.Id</td>
                            <td>@doctor.FullName</td>
                            <td>@doctor.Email</td>
                            <td>@doctor.PhoneNumber</td>
                            <td>@doctor.UserId</td>
                        </tr>
                    }
                </tbody>
            </table>
            
            <h3>Debug Bilgisi</h3>
            <div class="alert alert-info">
                <h5>ğŸ‘¤ Hasta KullanÄ±cÄ±sÄ±:</h5>
                <strong>Test KullanÄ±cÄ±:</strong> @(ViewBag.TestUser?.Email ?? "âŒ BulunamadÄ±")<br>
                <strong>Test Hasta:</strong> @(ViewBag.TestPatient?.Email ?? "âŒ BulunamadÄ±")<br>
                <strong>UserId EÅŸleÅŸmesi:</strong> @(ViewBag.UserPatientMatch ? "âœ… EÅŸleÅŸiyor" : "âŒ EÅŸleÅŸmiyor")<br>
                <strong>Hasta Rolleri:</strong> @(ViewBag.TestUserRoles != null ? string.Join(", ", ViewBag.TestUserRoles) : "âŒ Rol bulunamadÄ±")<br>
                @if (ViewBag.TestUser != null && ViewBag.TestPatient != null)
                {
                    <strong>User ID:</strong> @ViewBag.TestUser.Id<br>
                    <strong>Patient UserId:</strong> @ViewBag.TestPatient.UserId<br>
                }
                
                <hr>
                
                <h5>ğŸ‘¨â€âš•ï¸ Doktor KullanÄ±cÄ±sÄ±:</h5>
                <strong>Test Doktor KullanÄ±cÄ±:</strong> @(ViewBag.TestDoctorUser?.Email ?? "âŒ BulunamadÄ±")<br>
                <strong>Test Doktor:</strong> @(ViewBag.TestDoctor?.Email ?? "âŒ BulunamadÄ±")<br>
                <strong>UserId EÅŸleÅŸmesi:</strong> @(ViewBag.UserDoctorMatch ? "âœ… EÅŸleÅŸiyor" : "âŒ EÅŸleÅŸmiyor")<br>
                <strong>Doktor Rolleri:</strong> @(ViewBag.TestDoctorUserRoles != null ? string.Join(", ", ViewBag.TestDoctorUserRoles) : "âŒ Rol bulunamadÄ±")<br>
                @if (ViewBag.TestDoctorUser != null && ViewBag.TestDoctor != null)
                {
                    <strong>User ID:</strong> @ViewBag.TestDoctorUser.Id<br>
                    <strong>Doctor UserId:</strong> @ViewBag.TestDoctor.UserId<br>
                }
            </div>
            
            <a href="/Test/CreateTestUser" class="btn btn-primary">Test KullanÄ±cÄ± OluÅŸtur</a>
        </div>
    </div>
</div>
